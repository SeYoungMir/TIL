## 3. 내외부 연계 모듈 구현
### 1. 연계 모듈 구현 환경 구현 및 개발
#### 1. EAI/ESB 방식
- Trigger를 자바와 같은 프로그램 언어를 사용한 응용 애플리케이션으로 수행하거나, 연계 테이블을 파일로 변경할 수 있음
1. EAI(Enterprise Application Integration)
- 기업에서 운용하는 서로 다른 S/W를 네트워크 프로토콜, OS와 상관없이 비즈니스 프로세스 차원에서 통합하는 전사적 애플리케이션 통합
2. ESB(Enterprise Service Bus)
- 다양한 시스템과 연돌을 위한 멀티 프로토콜이 특징이며, 이벤트, 표준 지향적.
- 플랫폼은 독립적 운영하며, 서비슷를 조합하는 BPM을 지원
3. 연계 모듈 환경 구축 절차
   1. 연계 DB 또는 계정 생성
      - 송수신 시스템에서 각각 연계를 위한 DB를 설치 및 사용자 계정을 생성
      - 송수신 연계 사용자 계정명이 상이해도 무관
      - 기존 연계를 위한 DB가 운영 중인 경우, 목적에 따라 분리한 연계 사용자 계정을 생성
      - 운영 DB의 사용자와 연계를 위한 사용자는 생성되는 목적이 다르므로 물리, 논리적으로 분리 관리
   2. 연계를 위한 테이블 생성
    <table>
        <tr>
            <th>생성 위치</th>
            <th>대상 테이블</th>
            <th>포함 정보 및 용도</th>
            <th>산출물명</th>
        </tr>
        <tr>
            <td rowspan=4>송수신 시스템</td>
            <td>인터페이스</td>
            <td>연계 데이터와 Raw 또는 속성 단위 오류 확인을 위한 관리 정보</td>
            <td>연계 테이블 정의서</td>
        </tr>
        <tr>
            <td>로그</td>
            <td>송수신 이력, 연계 단위 오류 확인을 위한 관리 정보</td>
            <td>로그 테이블 정의서</td>
        </tr>
        <tr>
            <td>오류코드</td>
            <td>송수신 시스템에서 송수신이나 데이터 처리 시 발생한 오류 코드 및 내용</td>
            <td>오류 코드 테이블 정의서</td>
        </tr>
        <tr>
            <td>코드</td>
            <td>진행 단계와 같은 공통 코드 정보</td>
            <td>코드 정의서</td>
        </tr>
        <tr>
            <td>송신 시스템</td>
            <td>코드 매핑</td>
            <td>송신 시스템의 코드를 수신 시스템의 코드로 변환하기 위한 매핑 정보</td>
            <td>코드 매핑 내역서</td>
        </tr>
    </table>
  
   3. 연계 응용 프로그램 구현
      - 송신 시스템과 수신 시스템에서 각각 구현
      - 송신 시스템에서 구현 시, 운영 DN에서 데이터를 추출, 코드를 수신 시스템의 코드로 변환하는 작업을 처리
      - 수신 시스템에서 구현 시 테이블의 데이터에 대한 유효성을 점검, 운영 DN에 반영하는 작업을 처리
        - 연계 응용 프로그램을 트리거로 구현 시 생성 위치 
        <table>
            <tr>
                <th>생성 위치</th>
                <th>생성 테이블</th>
                <th>처리 내용</th>
            </tr>
            <tr>
                <td>송신 시스템</td>
                <td>운영 DB의 테이블</td>
                <td>운영 DB에서 데이터 추출, 코드 및 데이터 변환, 오류 및 데이터 유효성 처리, 필요시 암호화 처리 등</td>
            </tr>
            <tr>
                <td>수신 시스템</td>
                <td>연계 테이블</td>
                <td>운영 DB에 데이터 반영, 오류 및 데이터 유효성 처리, 필요시 복호화 처리</td>
            </tr>
        </table>
#### 2. 웹 서비스 방식
1. 웹 서비스 기본 구조 및 구성 요소
- 웹 서비스는 분산되어 있는 네트워크 상에 정보를 서비스 형태로 표준화하여 공유하는 기술.
- 대표적으로 SOAP,UDDI,WSDL 방식이 있음
  - 웹 서비스 기본 구조
    -  UDDI Registry
       -  WSDL
       -  WSDL
       -  WSDL
    - Publish(SOAP)
    - Web Service Provider
      - WSDL
      - Service
    - Bind(SOAP)
    - Web Service Consumer
    - Find(SOAP) >UDDI Registry와 연결
<table>
    <tr>
        <th>구분</th>
        <th>설명</th>
    </tr>
    <tr>
        <td>SOAP</td>
        <td>HTTP,HTTPS,SMTP 등을 통해 XML기반의 메시지를 컴퓨터 네트워크 상에서 교환하는 프로토콜. 웹 서비스에서 기본적인 메시지를 전달하는 기반. 몇 가지 형태의 메시지 패턴 중에 원격 프로시져 호출 패턴으로, 네트워크 노드에서 다른 쪽 노드로 메시지를 요청, 서버는 메시지를 즉시 응답하는 것이 보통의 경우</td>
    </tr>
    <tr>
        <td>WSDL</td>
        <td>웹 서비스 기술 언어 또는 기술된 정의 파일의 총칭, XML로 기술됨. 구체적 내용이 기술되어 있어 서비스 제공 장소, 메시지 포맷, 프로토콜 등이 기술</td>
    </tr>
    <tr>
        <td>UDDI</td>
        <td>웹 서비스 관련 정보의 공개와 탐색을 위한 표준. 서비스 제공자는 UDDI라는 서비스 소비자에게 이미 알려진 온라인 저장소에 그들이 제공하는 서비스 목록들을 저장하게 되고, 서비스 소비자들은 그 저장소에 접근함으로써 원하는 서비스들의 목록을 찾을 수 있게 함</td>
    </tr>
</table> 

2. 연계 모듈 구현 환경 구축 절차
   - 웹 서비스 방식은 EAI/ESB 방식과는 달리 실제 전송이나 전송 이력에 대한 기록 및 모니터링 기능을 별도로 구현해야 함
   1. 송수신 파일 생성 위치 및 파일명 정의
      - 송신 시스템 : 송신 연계 파일, 로그 파일, 오류 로그 파일이 생성될 위치와 파일명을 정의한 후 폴더를 생성
      - 수신 시스템 : 수신 연계 파일, 로그 파일, 오류 로그 파일이 생성될 위치와 파일명을 정의한 후 폴더를 생성

   2. 송신시스템 연계 응용 프로그램 구현
      - 송신 시스템에서 운영 DB로부터 연계 데이터를 추출하여송신 파일을 XML 형식으로 생성하는 자바 프로그램을 구현
      - 자바로 구현되는 연계 응용 프로그램에서는 송신 시스템의 운영 DB에 연결을 생성, 데이터를 추출, 코드 매핑 및 변환을 수행 후 연계 파일 생성
      - 서비스의 주기적인 실행을 위한 클론 또는 DBMS에 Schedule을 등록
   3. 파일 전송 및 수신 시스템의 DB 반영 서비스 호출
      - 연계 파일을 수신 시스템의 위치로 전송 후 파일 내용을 운영DB에 반영하여 실행
      - 서비스 위치, 서비스명 등 상세 내용이 포함된 서비스 명세서인 WSDL을 작성하여 송수신 시스템 간에 공유하여 서비스를 실행
      - 수신 시스템에 연계 파일을 전송 후, 내용을 수신 시스템 운영 DB에 반영하는 서비스의 위치, 서비스명 등이 WSDL에 기술되어 있음
   4. 수신 시스템의 연계 응용 프로그램 구현
      - 송신의 연계 응용 프로그램과 동일하게 자바를 사용
      - 연계 파일의 데이터를 수신 시스템의 운영 DB에 반영, 처리 과정을 기록
      - 실행 된 서비스를 수신 시스템의 서비스 호출이 가능한 위치에 배치