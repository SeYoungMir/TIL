# 5. 빅데이터 적재 II - 실시간 로그/분석 적재
## 2. 빅데이터 실시간 적재에 활용하는 기술
### 4. 에스퍼
- 에스퍼 소개
  - 에스퍼(Esper)의 경우 실시간 스트리밍 데이터의 복잡한 이벤트 처리가 필요할 때 사용하는 룰 엔진
  - 스톰이 대규모의 실시간 데이터를 단순 가공 및 추출 처리하는 데는 문제 없지만 실시간으로 발생하는 데이터로부터 복잡한 패턴을 찾고, 그 패턴에 따른 이벤트를 처리하는 것은 쉬운 일이 아님
  - 실시간으로 발생하는 데이터 간의 관계를 복합적으로 판단 및 처리하는 것을 CEP(Complex Event Processing)라고 하는데, 에스퍼가 바로 CEP 기능을 제공함
  - 에스퍼를 이용하면 CEP 처리를 위한 다양한 조건과 복합 이벤트를 하나의 룰로 쉽게 정의할 수 있어 CEP 처리 및 관리가 수월해짐
  - 에스퍼는 빅데이터 기술이 등장하기 이전부터 개발이 활발히 진행, 현재도 룰 엔진이 필요한 다양한 사이트에서 사용되고 있음.
  - 2006년 EsperTech사로부터 에스퍼 0.7.0알파 버전이 최초로 공개, 2014년에 5.x가 정식으로 릴리스. 이후에도 계속해서 새로운 버전들이 릴리스 되는 중
- 에스퍼의 기본 요소
<table>
    <tr>
        <td>공식 홈페이지</td>
        <td colspan=2>http://www.espertech.com</td>
    </tr>
    <tr>
        <td rowspan=5>주요 구성 요소</td>
        <td>Event</td>
        <td>실시간 스트림으로 발생하는 데이터들의 특정 흐름 똔느 패턴을 정의</td>
    </tr>
    <tr>
        <td>EPL</td>
        <td>유사 SQL을 기반으로 하는 이벤트 데이터 처리 스크립트 언어</td>
    </tr>
    <tr>
        <td>Input Adapter</td>
        <td>소스로부터 전송되는 데이터를 처리하기 위한 어댑터 제공(CSV,Socket,JDBC,Http 등)</td>
    </tr>
    <tr>
        <td>Output Adapter</td>
        <td>타깃으로 전송하는 데이터를 처리하기 위한 어댑터 제공(HDFS,CSV,Socket,Email,Http 등)</td>
    </tr>
    <tr>
        <td>Window</td>
        <td>실시간 스트림 데이터로부터 특정 시간 또는 개수를 설정한 이벤트들을 메모리 상에 등록한 후 EPL을 통해 결과를 추출</td>
    </tr>
    <tr>
        <td>라이선스</td>
        <td colspan=2>GPL</td>
    </tr>
    <tr>
        <td>유사 프로젝트</td>
        <td colspan=2>Drools</td>
    </tr>
</table>

- 오픈소스 컴플라이언스 이슈
  - 빅데이터의 소프트웨어들은 대부분이 오픈소스, 이 가운데 하둡을 중심으로 대부분 아파치 라이선스를 채택. 아파치 라이선스의 경우 제약 사항이 적어 다양한 비즈닉스 모델에 적용해도 크게 문제되지 않음.
  - 간혹 오픈소스이지만 상업적 활용이 어렵고 소스 공개 의무가 있어 컴플라이언스 이슈가 발생하는 라이선스가 있음. 대표적으로 GPL,AGPL등이 있는데, 에스퍼가 GPL 2.0 라이선스를 채택하고 있어 주의할 필요가 있음.