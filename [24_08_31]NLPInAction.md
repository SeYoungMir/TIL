# 1.NLP 기초.
## 1. 사고의 단위: NLP 개요
### 6. 단어의 순서와 문법
- 영어 같은 자연어에서는 단어의 순서가 대단히 중요.
- 단어열(문장, 절, 구 등)에서 단어의 순서를 관장하는 규칙을 언어의 문법(grammer)라고 부름.
- 앞에서 말했듯, 단어 모음 표현은 단어들의 순서를 보존하지 않음. 대부분의 짧은 문구는, 심지어는 완전한 문장도, 그런 단어 모음 벡터 표현으로 잘 처리할 수 있음. 어떤 짧은 문장의 전반적인 의미와 정서를 부호화 하는 것이 목적이라면 단어의 순서가 그리 중요하지 않음.
- 예를 들어 파이썬 permutations 모듈의 순열 치환(permutation)기능을 이용, "Good morning Rosa"의 단어 순서를 다양하게 바꾸어 테스트.
- ```python
  from itertools import permutations
  ["".join(combo) for combo in permutations("Good morning Rosa!".split(),3)]
  ```
- 출력되는 각 문장을 따로 떼어 놓고 보아도 의미와 정서를 파악하기가 그리 어렵지 않음. Good의 첫 글자가 대문자라는 점에서 문장의 첫 단어, 혹은 고유명사라고 파악 가능. 
- 단어의 순서가 중요한, 좀 더 길고 복잡한 논리적 문장을 시험.
- ```python
  s= """Find textbooks with titles contttaining 'NLP' or 'natural' and 'language', or 'computational' and 'linguistics'."""
  len(set(s.split()))
  import numpy as np
  np.arange(1,12+1).prod() #factorial(!2)=arange(1,13).prod()
  ```
- 앞의 간단한 인사말 예는 순열 개수가 factorial(3)=6이었지만, 이 긴 문장에서는 factorial(12)=479001600으로 엄청나게 커졌음. 그리고 정확한 문장으로응답하는 챗봇을 만들려면 단어들의 순서에 담긴 논리가 중요하다는 점이 명백함.
- 공통의 인사말은 단어 모음 처리를 거쳐도 그리 망가지지 않지만, 복잡한 문장을 단어 모음으로 바꾸면 대부분의 의미가 사라질 수 있음. 애초에 단어 모음은 이전 예에 나온 자연어 질의 같은 데이터베이스 질의를 처리하는데 아주 적합한 수단이 아님.
- SQL 같은 형식적 프로그래밍 언어로 작성된 문장이든, 아니면 영어 같은 비형식적 자연어로 된 문장이든, 사물들 사이의 논리적 관계를 전달하려는 문장에서는 단어 순서와 문법이 중요.
- 컴퓨터 언어들이 엄격한 문법과 구문 규칙 파서에 의존하는 이유가 그것.
- 자연어 구문 트리 파서의 최근 진보 덕분에 자연어 문장에서 구문적, 논리적 관계를 놀라운 정확도로 추출하는 것이 가능. 이후의 장들에서는 SyntaxNet(ParseyMcParseface)나 spaCy같은 패키지를 이용해서 그런 관계를 식별하는 방법을 탐색.
- 인사말 예제처럼 단어 순서를 몰라도 논리적 해석이 가능한 문장이라도, 단어 순서에서 미묘한 의미상의 단서를 포착해서 좀 더 심오한 응답문을 만드는데 활용 가능. 그러한 좀 더 심층적인 자연어 처리는 다음 장에서 논의.
- 제 2장에서는 단어 순서가 전달하는 정보의 일부를 단어 벡터 표현에 도입하는 방법 논의.
- 이전 예제에서 사용한 조잡한 토큰 생성기(str.split())를 더욱 정련해서 단어들을 단어 벡터의 적절한 슬롯들에 좀 더 정확하게 집어넣는 방법도 논의.
- 예를 들어, 대소문자가 차이 나는 단어는 같은 토큰으로 분류, "Rosa!" 같은 문장부호가 붙은 건 개별 슬롯으로 분류.