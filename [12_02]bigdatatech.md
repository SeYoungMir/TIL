# 5. 빅데이터 적재 II - 실시간 로그/분석 적재
## 2. 빅데이터 실시간 적재에 활용하는 기술
### 2. 레디스 - 이어서
- 레디스 활용 방안
  - 파일럿 프로젝트에서는 스마트카 운전자의 상태 정보를 실시간으로 분석, 결과를 빠르게 저장하면서 주변 시스템과 공유하기 위한 저장소로 레디스 활용
  - Storm에서 두 개의 경로로 분리되는데, 이 때 HBase에는 운전자의 모든 상태 정보를 저장, 레디스에는 운전자의 특정 패턴을 감지한 이벤트 결과(과속한 운전자 정보)만 저장.
  - 주변 응용시스템에서 레디스에 적재된 정보를 빠르게 조회해서 활용
- 레디스 활용 방안
  - 운전자 운행 로그 (400KB/1초)
  - 플럼
  - 카프카
  - 스톰
    - HBase
      - HRegionServer
        - HRegion
          - Driver info 1/2
    - 레디스
      - Master
        - Driver 1,2,...N
  - 과속한 운전자의 실시간 운행정보 적재
  - 과속한 운전자의 운행 정보를 빠르게 검색 및 조회
### 3. 스톰
- 스톰 소개
  - 스톰(Storm)은 스피드 데이터를 인메모리상에서 병렬 처리하기 위한 소프트웨어
  - 빅데이터 3V 중 Velocity(속도)에 해당하는 스피드 데이터는 원천 시스템의 수많은 이벤트(클릭/터치, 위치, IoT등)가 만들어내며, 작지만 대규모의 동시 다발적이라는 특성 있음.
  - 스피드 데이터를 실시간으로 분석할 수 있다면 원천에서 무슨 일이 발생하고 있는지 빠르게 알아낼 수 있어 마케팅과 리스크 등의 분야에서 활용 가치가 높음
  - 스톰은 이러한 스피드 데이터를 실시간으로 다루기 위해 모든 데이터를 인메모리 상에서 분산 병렬 처리하고, 분산 데이터를 통제하기 위한 강력한 기능(분리, 정제, 통합, 집계 등)과 아키텍처도 제공
  - 실시간 분산 처리 유형으로는 데이터 발생과 동시에 처리하는 완전 실시간 방식과 발생한 데이터를 적재한 후 빠르게 배치를 실행하는 마이크로 배치 방식이 존재
  - 스톰은 완전 실시간 방식, 조금의 레이턴시도 허용되지 않는 아키텍처에 적용
  - 스톰은 2011년 트위터가 백타이프라는 회사로부터 인수, 오픈소스 프로젝트로 공개. 그 뒤 스톰의 기능 강화, 대규모 인터넷 서비스에 적용되기 시작, 2014년 9월 아파치 최상위 프로젝트로 승격
- 스톰의 기본 요소
<table>
    <tr>
        <td>공식 홈페이지</td>
        <td colspan=2>http://storm.apache.org/</td>
    </tr>
    <tr>
        <td rowspan=8>주요 구성 요소</td>
        <td>Spout</td>
        <td>외부로부터 데이터를 유입받아 가공 처리해서 튜플을 생성, 이후 해당 튜플을 Bolt에 전송</td>
    </tr>
    <tr>
        <td>Bolt</td>
        <td>튜플을 받아 실제 분산 작업을 수행하며, 필터링(Filtering),집계(Aggregation),조인(Join)등의 연산을 병렬로 실행</td>
    </tr>
    <tr>
        <td>Topology</td>
        <td>Spout-Bolt의 데이터 처리 흐름을 정의, 하나의 Spout와 다수의 Bolt로 구성</td>
    </tr>
    <tr>
        <td>Nimbus</td>
        <td>Topology를 Supervisor에 배포하고 작업을 할당, Supervisor를 모니터링하다 필요시 페일오버(Fail-Over)처리</td>
    </tr>
    <tr>
        <td>Supervisor</td>
        <td>Topology를 실행할 Worker를 구동시키며 Topology를 Worker에 할당 및 관리</td>
    </tr>
    <tr>
        <td>Worker</td>
        <td>Supervisor 상에서 실행 중인 자바 프로세스로 Spout와 Bolt를 실행</td>
    </tr>
    <tr>
        <td>Executor</td>
        <td>Worker 내에서 실행되는 자바 스레드</td>
    </tr>
    <tr>
        <td>Tasker</td>
        <td>Spout 및 Bolt 객체가 할당</td>
    </tr>
    <tr>
        <td>라이선스</td>
        <td colspan=2>Apache</td>
    </tr>
    <tr>
        <td>유사 프로젝트</td>
        <td colspan=2>Samza,S4,Akka,Spark Stream</td>
    </tr>
</table>
