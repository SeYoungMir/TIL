# 8. 크롤러 유지보수와 운용
## 2. 다중 실행 방지하기
### 1. 동일 처리 다중 실행 대책
1. 스크립트를 실행해서 확인.
   - 위에서 한 코드의 스크립트 동작을 실제로 다중 실행해서 확인. 다음 명령어는 lock_example.sh를 백그라운드에서 실행. 1초 후에 같은 스크립트(lock_example.sh)를 중복해서 실행
   - ```cmd
     $ bash lock_example.sh & sleep 1; bash lock_example.sh
     ```
    - 실행 결과는 다음과 같음
    - ```cmd
      [1] 1515
      명령어 실행 . 프로세스 ID : 1515
      명령어 실행 중
      이미 실행중. PID: 1515
      ```
    - 프로세스가 이중으로 실행되지 않는지 실제로 확인. 이는 다음 명령어로 확인 가능.
    - ```cmd
      $ ps aux | pgrep -f lock_example.sh
      ```
    - ps 명령어에 매개변수 aux 옵션을 붙여서 모든 프로세스를 출력, 출력 내용을 pgrep 명령어로 전달. pgrep 명령어의 옵션 -f 는 grep 하고싶은 프로세스의 이름을 지정할 때 사용
    - 실행 결과를 보면 lock_example.sh라는 문자열을 포함하는 프로세스가 1개, 프로세스 ID 1515를 출력하는 모습을 확인 가능.
    - 같은 처리를 중복해서 실행하는 것은 데이터의 부정합을 일으킬 수 있는 위험성이 있으므로 주으해서 다뤄야 함.