## 2. 물리 데이터 저장소 설계하기
### 1. 물리 데이터 모델링 
#### 1. 물리 데이터 모델링의 정의
- 논리 데이터 모델을 DBMS의 특성 및 성능을 고려하여 구체화시킨 모델.
- 물리 데이터 모델은 DBMS 선정 이후에 해당 DBMS 상에서 최상의 성능을 보장하도록 논리 데이터 모델에서 저장하는 데이터의 물리적 특성을 최대한 반영하여 설계하고 이를 관리함
- 구축하고자 하는 업무 시스템의 논리 데이터 모델을 적용
#### 2. 물리 데이터 저장소 모델 변환 순서
1. 단위 개체(Entity)를 테이블로 변환
    - 논리 모델에서 정의된 개체(Entity)는 물리 모델에서 테이블로 변환
   1. 일반적으로 테이블과 캐체(Entity)의 명칭을 동일하게 만드는 것을 권고
   2. 개체(Entity)는 한글명, 테이블은 영문명을 사용
   <table>
        <tr>
            <th>논리적 설계(데이터 모델링)</th>
            <th>물리적 설계</th>
            <th>데이터 베이스</th>
        </tr>
        <tr>
            <td>엔터티(Entity)</td>
            <td>테이블(Table)</td>
            <td>테이블</td>
        </tr>
        <tr>
            <td>속성(Attribute)</td>
            <td>컬럼(Column)</td>
            <td>컬럼</td>
        </tr>
        <tr>
            <td>주 식별자(Primary Identifier)</td>
            <td>기본 키(Primary Key)</td>
            <td>기본 키</td>
        </tr>
        <tr>
            <td>외래 식별자(Foreign Identifier)</td>
            <td>외래 키(Foreign Key)</td>
            <td>외래 키</td>
        </tr>
        <tr>
            <td>관계(Relationship)</td>
            <td>관계(Relationship)</td>
            <td></td>
        </tr>
        <tr>
            <td>관계의 카디날리티</td>
            <td>관계의 카디날리티</td>
            <td></td>
        </tr>
        <tr>
            <td>관계의 참여도</td>
            <td>관계의 참여도</td>
            <td></td>
        </tr>

   </table>
2. 속성을 칼럼으로 변환
   - 논리 모델에서 정의된 속성을 물리모델에서 칼럼으로 변환
   1. 칼럼의 명칭은 프로그래머와 사용자의 혼동을 피하기 위해 표준화된 약어를 사용
   2. SQL 예약어(Reserved word)의 사용은 피함
   3. 칼럼 명칭은 가능한 짧게
   4. 필수 입력 속성은 Nulls/Unique 란에 NN을 표시
   5. 칼럼명으로 복합단어를 사용할 경우 미리 정의된 표준에 의해 이름을 설정
3. UID를 기본 키 (Primary Key)로 변환
   - 논리 모델에서 정의된 UID는 물리 모델에서 기본 키로 변환
   1. 엔터티의 UID에 해당하는 모든 속성에 대하여 기본키로 선언
   2. Not Null, Unique 등의 제약 조건을 추가로 정의
   3. 관계에 의한 외래키가 기본키에 포함 가능
4. 관계를 외래 키(Foreign Key)로 변환
   - 논리 모델에서 정의된 관계는 외래 키로 변환
   1. 1:1 관계에서는 개체 A의 기본 키를 개체 B의 외래 키로 추가하여 표현
   2. 1:M관계에서는 Primary Key:Foreign Key로 변환. 논리 데이터 모델에서 존재하는 관계 중에서 가장 많은 형태의 관계
   3. N:M관계에서는 릴레이션 A와 B의 기본 키를 모두 포함한 별도의 릴레이션으로 표현
5. 칼럼 유형(Type)과 길이(Length)를 정의
   - 적절한 유형을 정의, 데이터의 최대 길이를 파악하여 길이를 설정
   1. 자주 사용되는 데이터 유형
    <table>
        <tr>
            <th>데이터 유형</th>
            <th>내용</th>
        </tr>
        <tr>
            <td>CHAR</td>
            <td>고정길이 문자열 Data 최대 200Byte까지 저장 가능</td>
        </tr>
        <tr>
            <td>VARCHAR</td>
            <td>가변길이 문자열 Data 최대 4000Byte까지 저장 가능</td>
        </tr>
        <tr>
            <td>NUMBER</td>
            <td>38 자릿수의 숫자 저장 가능</td>
        </tr>
        <tr>
            <td>DATE</td>
            <td>날짜 값 저장</td>
        </tr>
        <tr>
            <td>BLOB,CLOB</td>
            <td>Binary,Text Data 최대 4GB까지 저장 가능</td>
        </tr>
    </table>

6. 반정규화(Denormalization) 수행
   - 데이터 논리 모델링의 정규화 작업이 완료된 후 데이터 물리 모델링 과정 중 시스템의 성능 향상, 개발 과정의 편의성, 운영의 단순화를 위한 반정규화 과정을 하게 됨
   1.  중복 테이블 추가
       - 집계, 진행 테이블 추가
       - 특정부분만을 포함하는 테이블 추가
   2.  테이블 조합
       - 1:1 관계의 테이블 조합
       - 1:M 관계의 테이블 조합
       - 슈퍼타입 서브타입 테이블 조합
   3.  테이블 분할
        - 수평 분할
        - 수직 분할
   4.  테이블 제거
       - 테이블 재정의, 칼럼의 중복화
       - 더 이상 액세스 되지 않는 테이블 제거
   5.  칼럼의 중복화
       - 조인 프로세스 감소를 위해 칼럼의 중복 허용
#### 3. 반정규화(Denormalization)개념
1. 정의
   - 정규화에 충실하여 모델링을 수행하면 종속성, 활용성은 향상되는 수행속도가 증가하는 경우가 발생하여 이를 극복하기 위해 성능에 중점을 두어 정규화하는 방법
2. 특징
   1. 데이터 모델링 규칙에 얽매이지 않음
   2. 시스템 성능향상을 목적으로 함
3. 사용시기
   1. 주로 요약 자료만 요구되는 경우
   2. 다량의 범위, 특정 범위의 데이터를 자주 처리해야 할 경우
   3. 처리 범위를 줄이지 않고는 수행속도를 개선할 수 없는 경우
   4. 정규화에 충실하였으나 수행 속도에 문제가 발생하는 경우
   5. 추가된 테이블의 처리를 위한 오버헤드를 고려하여 결정
#### 4. 반정규화(Denormalization)유형
1. 중복 테이블 추가
   1. 다 범위를 자주 처리하는 경우
   2. 특정 범위의 데이터만 자주 처리되는 경우
   3. 처리 범위를 줄이지 않고는 수행 속도를 개선할 수 없는 경우 
2. 테이블 조합
   1. 두 개 이상의 테이블에 대해 동일하게 발생하는 경우 활용
   2. 해당 테이블을 통합 설계
   3. Not Null,Default, Check, Constraint를 완벽히 설계하기 어려움
3. 테이블 분할
   1. 칼럼의 사용 빈도 차이가 많거나 사용자가 각기 특정한 부분만 지속 사용하는 경우 활용
   2. 수직분할과 수평분할 방법이 있으며 칼럼의 사용빈도의 차이가 많은 경우 수직 분할, 범위별 사용 빈도 차이가 많은 경우 수평 분할을 사용
   3. 기본키의 유일성 관리가 어려우며, 분할된 테이블은 처리속도를 나쁘게 하는 점에 유의
4. 테이블 제거
   1. 칼럼의 중복화로 더 이상 엑세스 되지 않는 테이블이 발생할 경우 활용
   2. 관리 소홀, 누락으로 인해 유지보수 단계에서 빈번하게 발생하는 현상
   3. 해당 테이블을 삭제하는 방법을 사용
5. 칼럼의 중복화
   1. 주로 사용하는 칼럼이 다른 테이블에 분산되어 액세스 범위를 축소하지 못하는 경우 활용
   2. 기본키의 형태가 적절하지 않거나 너무 많은 칼럼으로 구성된 경우 활용
   3. 필요한 해당 테이블이나 칼럼을 추가하는 방법 사용
   4. 테이블 중복과 칼럼의 중복을 고려
   5. 저장공간의 낭비를 고려