# 1.NLP 기초.
## 3. TF-IDF 벡터
### 2. 벡터화
- 앞에서 우리는 텍스트를 기본적인 수준에서 수치들로 변환하는 방법을 학습. 그런데 앞에서는 그 수치들을 그냥 하나의 사전 자료 구조에 담아둠.
- 그 자료 구조로는 이 수치들을 수학적으로 활용할 여지가 그리 많지 않음. 이번에는 한 수준 더 올라가서, 문서를 표현하는 단어 빈도들을 벡터로 변환.
- 파이썬에서는 벡터를 하나의 목록(list)로 표현, 일반적으로 벡터는 수치 성분들의 순서 있는 컬렉션 또는 배열.
- 다음은 사전 자료 구조에 담긴 용어 빈도들로 하나의 정규화된 용어 빈도 벡터를 생성하는 예
  - ```python
    >>> document_vector = []
    >>> doc_length = len(tokens)
    >>> for key,value in kite_counts.most_common():
    ...     document_vector.append(value/ doc_length)
    >>> document_vector
    ```
- 이 벡터에 대해 여러 수학 연산을 직접 수행 가능.
  - 자료 구조의 처리 속도를 다양한 방법으로 증가 가능, 본격적 응용 단계로 넘어가면 처리 속도를 높이는 것이 중요.
- 연산 대상이 하나인 수학 연산은 큰 의미가 없음. 문서 하나에 대한 벡터 하나로는 부족. 
- 이는 여러 문서를 토큰화, 여러 개의 벡터를 만들면 해결. 그런데 그런 각 벡터의 수치(성분)들은 모든 벡터에 대해 일관된 뭔가를 기준으로 해야 함. 좀 더 구체적으로 말하면, 그 벡터들에 대해 어떤 수학 연산을 수행하려면 그 벡터들이 모두 공통의 공간 안의 위치를 나타내야 함. 즉, 문서 표현 벡터들은 그 원점이 같아야 하며, 각 차원(축)의 축척 또는 '단위'도 일치해야 함.
- 우선 각 용어 빈도를 그대로 성분으로 사용하는 것이 아니라앞에서 했던 것처럼 용어 빈도를 문서의 길이(총 단어 수)로 나눈 '정규화된 용어 빈도'를 성분으로 사용해야 하고, 모든 벡터의 길이 또는 차원을 표준화해야 함.
- 한 문서에 대한 벡터의 각 성분이 다른 문서에 대한 벡터의 각 성분과 같은 단어에 대한 수치이어야 한다는 조건도 만족해야 함. 그런데 모든 문서에 나오는 단어들이 모두 일치할 리가 없음. 문서마다 등장하는 단어가 다른데 그런 조건을 만족하려면 등장하지 않는 단어들이라도 벡터 안에 해당 성분을 두되, 값을 0으로 지정.
- 이러한 단어들의 중복 없는 합집합은 두 문서로 이루어진 말뭉치의 어휘를 형성. 그런 어휘를 어휘집(lexicon), 또는 어휘 사전이라 부름.
- 짧은 문서 몇 개를 시험. 우선 짧은 문장 세 개로 말뭉치를 만듦.
    - ```python
      >>> docs = ["The ~ "]
      >>> docs.append("Harry~")
      >>> docs.append("Jake~")
      ```
- 그 후 위 세 문서의 말뭉치의 어휘집을 살펴봄.
  - ```python
    >>> doc_tokens =[]
    >>> for doc in docs:
    ...     doc_tokens += [sorted(tokenizer.tokenize(doc.lower()))]
    >>> len(doc_tokens[0])
    >>> all_doc_tokens = sum(doc_tokens,[])
    >>> len(all_doc_tokens)
    >>> lexicon = sorted(set(all_doc_tokens))
    >>> len(lexicon)
    >>> lexicon
    ```
- 어휘의 토큰이 총 18개, 세 문서를 표현하는 각 벡터의 성분도 반드시 18개.
- 주어진 문서에 어휘집의 단어 18개가 모두 등장하지는 않더라도, 그 문서를 표현하는 벡터의 길이는 항상 어휘집의 단어 수 와 일치. 그리고 벡터의 한 성분의 위치(첨자)는 어휘집 안에서의 그 성분에 대응되는 토큰(단어)의 위치와 일치. 문서에 등장하지 않는 단어에 해당하는 성분의 값은 0
- 이런 관례덕분에 한 말뭉치의 문서에 대한 벡터들은 모두 하나의 공통 공간을 기준으로 하게 됨.