## 데이터베이스
### RDBMS
- Oracle
- mySQL
- MSSQL
- SYBASE
- DB2(메인프레임)(AIX)
- SQLite

### NoSQL
- MongDB
- Redis
- HBASE
- Neo4J
  
## SQL 명령어
- 데이터를 DB에서 처리
- DBA(Database Administator)
  - 데이터베이스를 총괄 관리
### DDL
- create database
- create table
- alter table
- drop table
### DML
- select(검색)
- update(변경)
- insert(삽입)
- delete(삭제)
### DCL
- grant
- revote
- deny

# DBMS와 SQL
## DBMS 개요
### 데이터베이스의 정의와 특징
- 데이터 베이스
  - '데이터의 집합'
  - 여러 명의 사용자나 응용 프로그램이 공유하는 데이터들
  - 동시에 접근 가능해야
  - 데이터의 저장공간 자체
- DBMS
  - 데이터베이스를 관리,운영하는 역할
### DB/DBMS의 특징
- 데이터의 무결성(Integrity)
  - 데이터베이스 안의 데이터는 오류가 없어야
  - 제약 조건(Constrain)이라는 특성을 가짐
- 데이터의 독립성
  - 데이터베이스 크기 변경하거나 데이터 파일의 저장소 변경 시 기존에 작성된 응용프로그램은 전혀 영향을 받지 않아야
- 보안
  - 데이터베이스 안의 데이터에 데이터를 소유한 사람이나 데이터에 접근이 허가된 사람만 접근 할 수 있어야 함
  - 접근할 때도 사용자의 계정에 따라서 다른 권한 가짐
- 데이터 중복의 최소화
  - 동일한 데이터가 여러 개 중복되어 저장되는 것 방지
- 응용프로그램 제작 및 수정이 수워짐
  - 통일된 방식으로 응용프로그램 작성 가능
  - 유지 보수 또한 쉬워짐
- 데이터의 안전성 향상
  - 대부분의 DBMS가 제공하는 백업, 복원 기능 이용
  - 데이터가 깨지는 문제가 발생할 경우, 원상으로 복원, 복구하는 방법이 명확해짐
-  파일 시스템 사용
   -  컴퓨터 파일에 기록/ 저장 - 메모장, 엑셀 활용
   -  컴퓨터에 저장된 파일의 내용은 읽고, 쓰기가 편한 약속된 형태의 구조 사용
   -  데이터의 양이 많아지면 데이터 중복으로 인한 불일치 위험
### 데이터 베이스의 발전
- 데이터 베이스 관리 시스템
  - 파일 시스템의 단점 보완
  - 대량의 데이터를 보다 효율적으로 관리하고 운영하기 위해 사용
  - DBMS -DataBase Management System
  - 데이터의 집합인 '데이터베이스'를 잘 관리하고 운영하기 위한 시스템 또는 소프트웨어
- SQL(Structured Query Language)
  - DBMS에 데이터 구축/관리/활용 위해서 사용되는 언어
  - DBMS를 통해 중요한 정보들을 입력, 관리, 추출
### SQL 개요
- SQL(Structured Query Language)
  - 관계형 데이터베이스에서 사용되는 언어,'에스큐엘'또는 '시퀄'
  - DBMS 제작 회사와 독립적
  - 다른 시스템으로 이식성이 좋음
  - 표준이 계속 발전중
  - 대화식 언어
  - 분산형 클라이언트/서버구조
## 요구사항 분석과 시스템 설계 및 모델링

### 정보시스템 구축 절차 요약
- 분석, 설계, 구현, 시험, 유지보수의 5가지 단계
- 분석
  - 구현하고자 하는 프로젝트의 가장 첫 번째 단계
  - 시스템 분석 또는 요구사항 분석이라고 불림
  - 요구사항 분석은 현재 우리가 '무엇을(What)'할 것인지 결정
  - 사용자의 인터뷰와 업무 조사 등을 수행
  - 분석의 결과로 많은 문서 작성
- 설계
  - 시스템 설계 또는 프로그램 설계
  - 구축하고자 하는 시스템을'어떻게(How)'할 것인지 결정 
  - 대부분의 프로젝트에서 분석과 설계의 과정이 전체 공정의 50% 이상 차지
- DB 모델링
  - 현실세계에서 사용되는 데이터를 MySQL에 어떻게 옮겨 놓을 것인지를 결정하는 과정 
  - 저장할 정보는 테이블(Table)이라는 형식에 맞춰 저장

  1. 데이터 식별
     - 입력/ 출력/ 프로세스
     -  input/output/process
  2. 데이터 흐름
     - input/process/output 순서
  3. 데이터 정의
      - 데이터 이름, type, 길이
      - id, string, 10자리
      - name, string, 10자리
      - add, string, 20자리...
  4. 데이터 속성 결정
     - 유니크, null 값 허용, primary key,foreign key 등의 설정
  5. 데이터 따라 table 구현
  6. table 관계 연결


#### DB모델링 설계 실습
- 수강신청 DB 모델링 설계 실습

- 필요 데이터
- 과목 데이터 
  - 과목 명, 과목 번호(primary key), 과목 수강 인원 수,전공 정보, 이수 구분, 해당 시간,교수명, 시간/학점, 분반? <이미 table로 들어간 데이터
- 학생 데이터 
  - 수강신청일, 인원수 (연동), 학생 고유 번호(primary key), 학생명, 전공 정보, 시간 left 정보, 이수 학점, " 학년,학번,학과, "
- *수강정보*
  - ID (학생)
  - 과목ID(과목)
  - 수강 수업 시간, 일정
  - 수강 신청 날짜/시간 등등(출력될 정보)
  - 수강 상태
- if 학생 수강신청
  -  전공 정보 일치? 인원수 left가 있는가? 시간표는 겹치지 않는가? 학점의 합은 범위 내인가?
  -   고유번호, 학생명 등록
  -  수강신청일, 수강 과목 데이터 반환
- 수강신청(데이터 정의,속성)
  필드명, 필드설명,필드 타입, 필드 길이
  - 학생정보
    - ID(unique)
      - 학생 ID,str or int,10~20 = varchar(10~20)
    - name
      - 학생 이름, string,20
    - address
      - 학생 주소, string, 200
    - 핸드폰 번호
      - 학생 핸드폰 번호, string, 13 
  - 과목정보
    - 과목명
      - dname, string, 20
    - 교수명
      - pname, string, 20
    - 학점
      - 학점, smallint,int,float , 1
  - 수강정보
    - EID string 10
    - DID string 20
    - SDATE DATE ~
- varchar와 char의 차이
  - varchar는 변화 가능
  - char는 변화 X
- primary key(고유키, pk)
  - 각 테이블에 하나씩
  - 오직 하나만
  - 중복되어서는 안되며, 비어잇어서도 안됨
- foreign key(외래 키, fk)
  - 두 테이블의 연결 
  - 학생정보 -과목정보 >수강정보
  - EID -Foreign key ->학생정보
  - DID - Foreign key ->과목정보
- schema(스키마), ERD
- winERD(window),WERD

### 데이터 활용
- 주로 select 문 사용해 데이터 활용
- 사용할 데이터베이스 선택 
- select 열 이름 from 테이블 이름[where 조건]
  - 모든 데이터 출력하기(열 이름 대신 '*')
  - 열을 선택해 데이터 출력하기(열 이름 나열)
  - 특정 데이터를 만족하는 데이터 출력하기(where 절에 조건 입력)
- 새로운 테이블 생성
- 테이블 삭제
  - drop table 테이블 이름
- 뷰(View)
  - 가상의 테이블
  - 실제 행 데이터를 가지고 있지 않음
- 스토어드 프로시저 (Stored Procedure)
  - SQL문을 하나로 묶어 편리하게 사용하는 기능
  - 다른 프로그래밍 언어와 같은 기능을 담당할 수도 있음
- 트리거(Trigger)
  - 테이블에 부착되어 테이블에 INSERT나 UPDATE 또는 DELETE 작업이 발생되면 실행되는 코드
- 백업과 복원
  - 백업(backup)
    - 현재의 데이터베이스를 다른 매체에 보관하는 작업
    - full backup, incremental backup
  - 복원(restore)
    - 데이터베이스에 문제 발생 시 다른 매체에 백업된 데이터를 이용해 원 상태로 돌려놓는 작업
  - 백업과 복원은 DBA(DataBase Administrator: 데이터베이스 관리자)가 해야할 가장 중요한 일
## SQL 기본

- SELECT 문
  - select... from
  - 원하는 데이터를 가져와주는 기본적인 구문
  - 가장 많이 사용되는 구문
  - 데이터베이스 내 테이블에서 원하는 정보 추출하는 명령
- USE 구문
  - select문 학습 위해 사용할 데이터베이스 지정
  - 지정해놓은 후 특별히 다시 use문 사용하거나 다른 db를 사용하겠다 명시하지 않는 이상 모든 SQL 문은 지정DB에서 수행
  
- SELECT 
  - SELECT *
    - 해당 DB에서 모든 항목을 가져옴
  - SELECT 열 이름
    - 테이블에서 필요로 하는 열만 가져오기 가능
    - 여러 개의 열을 가져오고 싶을 때는 콤마로 구분
    - 열 이름의 순서는 출력하고 싶은 순서대로 배열 가능
- 주석(Remark)
  - -- 한줄 주석
  - /* */ 여러줄 주석
- DB, TABLE,열의 이름이 확실하지 않을때 조회하는 방법
  - 현재 서버에 존재하는 DB 출력
    - show DATABASES;
  - 현재 서버에 어떤 TABLE이 있는지 보기
    - 데이터베이스에 있는 테이블 정보 조회
      - show table status;
    - 테이블 이름만 간단히 보기
      - show tables;
  - 테이블 열을 확인
    - describe tablename;
    - desc tablename;
- 특정 조건의 데이터만 조회 - SELECT ...From...WHERE
  - 기본적인 where절
    - 조회하는 결과에 특정한 조건을 줘서 원하는 데이터만 보고 싶을 때 사용
    - select 필드 이름 from 테이블 이름 where 조건식;
  - 관계 연산자의 사용
    - or 연산자 :'했거나','또는'
    - and 연산자 : '하고','면서','그리고'
    - 조건 연산자(=, < ,>, <=,>= < >,!= 등)와 관계 연산자(NOT,AND,OR 등)를 조합하여 데이터를 효율적으로 추출 가능
  - BETWEEN...AND와 IN() 그리고 LIKE
    - 데이터가 숫자로 구성되어 있으며 연속적인 값: BETWEEN... AND 사용
  - 이산적인(Discrete)값의 조건:IN()사용
  - 문자열의 내용 검색 :LIKE 사용 (문자 뒤에 %- 무엇이든 허용,한 글자와 매치 '_'사용 )
- ANY/ALL/SOME,서브쿼리(SubQuery, 하위쿼리)
  - 서브쿼리
    - 쿼리문 안에 또 쿼리문이 들어 있는 것
    - 주로 where전 안에 조건
  - ANY
    - 서브쿼리의 여러 개의 결과 중 한 가지만 만족해도 가능
    - SOME 은 ANY와 동일한 의미로 사용
    - '=ANY(서브쿼리)'는 'IN(서브쿼리)'와 동일한 의미
  - ALL
    - 서브쿼리의 결과 중 여러개의 결과를 모두 만족해야함
- 원하는 순서대로 정렬하여 출력:ORDER BY
  - ORDER BY절
    - 결과물에 대해 영향을 미치지는 않고 출력되는 순서를 조절하는 구문
    - 기본적으로 오름차순 (ASCENDING) 정렬
    - 내림차순(DESCENDING)으로 정렬하려면 열 이름 뒤에 DESC 
    - ORDER BY 구문을 혼합해 사용하는 구문도 가능
      - 키가 큰 순서로 정렬하되 만약 키가 같을 경우 이름순으로 정렬
      -  ASC(오름차순)는 디폴트 값이므로 생략 가능
- 중복된 것은 하나만 남기는 DISTINCT
  - 중복된 것을 골라서 세기 어려울 때 사용하는 구문
  - 테이블의 크기가 클수록 효율적
  - 중복된 것은 1개씩만 보여주면서 출력
- 출력하는 개수를 제한하는 LIMIT
  - 일부를 보기 위해 여러 건의 데이터를 출력하는 부담 줄임
  - 상위의 N개만 출력하는 ‘LIMIT N’ 구문 사용
  - 개수의 문제보다는 MySQL의 부담을 많이 줄여주는 방법
- 테이블을 복사하는 CREATE TABLE … SELECT
  - 테이블을 복사해서 사용할 경우 주로 사용
  - CREATE TABLE 새로운 테이블 (SELECT 복사할 열 FROM 기존테이블)
  - 지정한 일부 열만 복사하는 것도 가능
  - PK나 FK 같은 제약 조건은 복사되지 않음
### GROUP BY 및 HAVING 그리고 집계 함수
- GROUP BY절
  - 그룹으로 묶어주는 역할
  - 집계 함수(Aggregate Function)와 함께 사용
  - 효율적인 데이터 그룹화 (Grouping)
  - 각 사용자 별로 구매한 개수를 합쳐 출력
  - 읽기 좋게 하기 위해 별칭(Alias) AS 사용
- GROUP BY와 함께 자주 사용되는 집계 함수
  <table>
    <tr><th>함수명</th><th>설명</th></tr>
    <tr><td>AVG()</td><td>평균을 구한다.</td></tr>
    <tr><td>MIN()</td><td>최소값을 구한다.</td></tr>
    <tr><td>MAX()</td><td>최대값을 구한다.</td></tr>
    <tr><td>COUNT()</td><td>행의 개수를 센다.</td></tr>
    <tr><td>COUNT(DISTINCT)</td><td>행의 개수를 센다(중복은 1개만 인정).</td></tr>
    <tr><td>STDEV()</td><td>표준편차를 구한다.</td></tr>
    <tr><td>VAR_SAMP  ()</td><td>분산을 구한다.</td></tr>
    </table>
    <tr><td>GROUPBY와 함께 사용되는 집계 함수</td></tr>
- Having절
  - WHERE와 비슷한 개념으로 조건 제한하는 것이지만, 집계 함수에 대해서 조건을 제한
하는 것
  - HAVING절은 꼭 GROUP BY절 다음에 나와야 함(순서 바뀌면 안됨)

- ROLLUP
  - 총합 또는 중간 합계가 필요할 경우 사용
  - GROUP BY절과 함께 WITH ROLLUP문 사용
  - 총합 또는 중간 합계가 필요할 경우 사용
  - GROUP BY절과 함께 WITH ROLLUP문 사용

### SQL의 분류
- DML (Data Manipulation Language, 데이터 조작 언어)
  - 데이터를 조작(선택, 삽입, 수정, 삭제)하는 데 사용되는 언어
  - DML 구문이 사용되는 대상은 테이블의 행
  - DML 사용하기 위해서는 테이블이 정의되어 있어야 함
  - SQL문 중 SELECT, INSERT, UPDATE, DELETE가 이 구문에 해당
  - 트랜잭션(Transaction)이 발생하는 SQL도 DML에 속함
    - 테이블의 데이터를 변경(입력/수정/삭제)할 때 실제 테이블에 완전히 적용하지 않고, 임시로적용시키는 것
    - 취소 가능

- DDL (Data Definition Language, 데이터 정의 언어)
  - 데이터베이스, 테이블, 뷰, 인덱스 등의 데이터베이스 개체를 생성/삭제/변경하는 역할
  - CREATE, DROP, ALTER 자주 사용
  - DDL은 트랜잭션 발생시키지 않음
  - 되돌림(ROLLBACK)이나 완전적용(COMMIT) 사용 불가
- DCL (Data Control Language, 데이터 제어 언어)
  - 사용자에게 어떤 권한을 부여하거나 빼앗을 때 주로 사용하는 구문
  - GRANT/REVOKE/DENY 구문

## 데이터의 변경을 위한 SQL문
### 데이터의 삽입:INSERT
- INSERT문의 기본
  - 테이블 이름 다음에 나오는 열 생략 가능
  -  생략할 경우에 VALUES 다음에 나오는 값들의 순서 및 개수가 테이블이 정의된 열 순서 및 개수와 동일해야 함
- 자동으로 증가하는 AUTO_INCREMENT
  - INSERT에서는 해당 열이 없다고 생각하고 입력
  - INSERT문에서 NULL 값 지정하면 자동으로 값 입력
  - 1부터 증가하는 값 자동 입력
  - 적용할 열이 PRIMARY KEY 또는 UNIQUE일 때만 사용가능
  - 데이터 형은 숫자 형식만 사용 가능
- 대량의 샘플 데이터 생성
  - INSERT INTO … SELECT 구문 사용
  - 다른 테이블의 데이터를 가져와 대량으로 입력하는 효과
  - SELECT문의 열의 개수 = INSERT 할 테이블의 열의 개수
  - 테이블 정의 까지 생략 하려면 CREATE TABLE … SELECT 구문을 사용
### 데이터의 수정 : UPDATE
- 기존에 입력되어 있는 값 변경하는 구문
```sql
update 테이블 명
    set 열 1=값1,열2=값2...
    where 조건 ; <생략하면 모든 데이터가 업데이트되어서 바뀔 가능성, 주의
-- 해결방법
select * from 테이블명
where 조건;
-- 으로 확인하고 실행할 것
-- or 
commit; 
-- 설정을 이용해 최종 commit 이전까지 rollback을 지정
```
- WHERE절 생략 가능하나 WHERE절 생략하면 테이블의 전체 행의 내용 변경
  - 실무에서 실수가 종종 일어남, 주의 필요
  - 원상태로 복구하기 복잡하며, 다시 되돌릴 수 없는 경우도 있음


### 데이터의 삭제
  - DELETE FROM
    - 행 단위로 데이터 삭제하는 구문
    - where절 생략되면 전체 데이터를 삭제
    - 테이블을 삭제하는 경우 속도 비교
      - DML문인 delete는 트랜젝션 로그 기록 작업때문에 삭제 느림
      - DDL문인 DROP과 TRUNCATE문은 트랜잭션 없어 빠름
        - 테이블 자체가 필요 없을 경우에는 DROP으로 삭제
        - 테이블의 구조를 남겨놓고 싶다면 TRUNCATE로 삭제하는 것이 효율적
### 조건부 데이터 입력, 변경
  - 기본 키가 중복된 데이터를 입력한 경우
    - 오류로 입력 불가
  - 대용량 데이터 처리의 경우 에러 발생하지 않은 구문 실행
    - INSERT IGNORE문
      - 에러 발생해도 다음 구문으로 넘어가게 처리
      - 에러 메시지 보면 적용되지 않은 구문이 어느 것인지 구분 가능
    - ON DUPLICATE KEY UPDATE 구문
      - 기본 키가 중복되면 데이터를 수정되도록 하는 구문도 활용 가능