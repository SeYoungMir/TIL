# 5. 크롤러 설계/개발(응용)
## 5. 병렬 처리
### 3. 작업 큐(여러 개의 머신을 사용, 병렬 처리)
- 이전 예제는 하나의 머신으로 병렬 처리, 만약 여러 개의 머신을 사용해서 병렬로 처리할 수 있다면 대량의 데이터를 보다 효율적으로 수집 가능
- 여러 개의 머신에서 병렬 처리를 할 때는 작업 큐(Job Queue)를 적용하는 경우 많음.
- 큐는 먼저 들어간 데이터가 가장 먼저 나오는 대기 행렬 자료 구조
- 작업을 의뢰하는 메인 프로그램은 처리하고 싶은 작업이 생겼을 때, 일시적으로 작업을 저장하는 장소로 큐에 넣음.
- 이러한 작업은 워커(Worker)프로그램이 처리
- 여러 개의 머신에서 워커를 실행, 워커가 큐에 있는 작업을 하나씩 꺼내서 처리 하면서 분산 처리
- 태스크 큐의 구조와 병렬 프로그래밍에 대한 지식이 없다면 직접 구현하기 어려움. 서드 파티 라이브러리 사용 검토
1. Celery 사용
   - 파이썬으로 잡 큐를 구현한 대표적인 서드파티 라이브러리
   - Celery[(URL)](http://www.celeryproject.org/)
   - Celery는 재시도 횟수를 지정, 유효 기간을 설정, 특정 워커와 특정 큐를 연결하는 등 굉장히 세부적인 태스크 제어 가능. Celery는 외부에서 구현된 큐를 관리하는 형태로 사용
   - Celery가 큐로 사용할 수 있는 큐는 RabbitMQ, Redis. RabbitMQ는 대표적인 메시지 큐 구현, 높은 부하가 예상되는 잡 큐 시스템을 활용할 때 검토하면 좋은
   - Redis는 KVS(Key-Value Store)로서 메시지 큐는 아니지만 Celery가 큐로 활용할 수 있는 외부 저장소
   - Celery 이외에도 비교적 새로운 서드파티 라이브러리인 RQ[(URL)](http://python-rq.org/)는 Redis를 사용할 것을 전제로 만들어진 라이브러리
   - Celery와 RQ 모두 웹 브라우저에서 태스크를 목록으로 보거나 관리하는 기능 지원